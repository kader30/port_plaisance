<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <title>models/User.js - Documentation</title>


  <script src="scripts/prettify/prettify.js"></script>
  <script src="scripts/prettify/lang-css.js"></script>
  <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  <link type="text/css" rel="stylesheet" href="styles/prettify.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
  <script src="scripts/nav.js" defer></script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <nav>


    <h2><a href="index.html">Home</a></h2>
    <h3>Modules</h3>
    <ul>
      <li><a href="module-app.html">app</a></li>
      <li><a href="module-app_API.html">app/API</a></li>
      <li><a href="module-middleware_authJWT.html">middleware/authJWT</a></li>
      <li><a href="module-models_Catway.html">models/Catway</a></li>
      <li><a href="module-models_Reservation.html">models/Reservation</a></li>
      <li><a href="module-models_User.html">models/User</a></li>
      <li><a href="module-Services_catways.html">Services/catways</a>
        <ul class='methods'>
          <li data-type='method'><a href="module-Services_catways.html#~createCatway">createCatway</a></li>
          <li data-type='method'><a href="module-Services_catways.html#~deleteCatway">deleteCatway</a></li>
          <li data-type='method'><a href="module-Services_catways.html#~getAllCatways">getAllCatways</a></li>
          <li data-type='method'><a href="module-Services_catways.html#~getCatwayByNumber">getCatwayByNumber</a></li>
          <li data-type='method'><a href="module-Services_catways.html#~updateCatway">updateCatway</a></li>
        </ul>
      </li>
      <li><a href="module-Services_reservations.html">Services/reservations</a>
        <ul class='methods'>
          <li data-type='method'><a href="module-Services_reservations.html#~CreateReservation">CreateReservation</a>
          </li>
          <li data-type='method'><a href="module-Services_reservations.html#~createReservation">createReservation</a>
          </li>
          <li data-type='method'><a href="module-Services_reservations.html#~deleteReservation">deleteReservation</a>
          </li>
          <li data-type='method'><a href="module-Services_reservations.html#~updateReservation">updateReservation</a>
          </li>
        </ul>
      </li>
      <li><a href="module-Services_users.html">Services/users</a>
        <ul class='methods'>
          <li data-type='method'><a href="module-Services_users.html#~createUser">createUser</a></li>
          <li data-type='method'><a href="module-Services_users.html#~deleteUser">deleteUser</a></li>
          <li data-type='method'><a href="module-Services_users.html#~getAllUsers">getAllUsers</a></li>
          <li data-type='method'><a href="module-Services_users.html#~getUserByEmail">getUserByEmail</a></li>
          <li data-type='method'><a href="module-Services_users.html#~updateUser">updateUser</a></li>
        </ul>
      </li>
    </ul>

  </nav>

  <div id="main">

    <h1 class="page-title">models/User.js</h1>







    <section>
      <article>
        <pre class="prettyprint source linenums"><code>/**
 * @file Modèle Mongoose représentant un utilisateur.
 * @module models/User
 *
 * @description
 * Définit le schéma User ainsi que :
 * - le hash automatique du mot de passe avant sauvegarde
 * - une méthode d’instance pour comparer un mot de passe en clair
 */

const mongoose = require('mongoose');
const bcrypt = require('bcrypt');

/**
 * Représente un utilisateur enregistré dans la base.
 *
 * @typedef {Object} User
 * @property {string} username - Nom d'utilisateur.
 * @property {string} email - Adresse email unique.
 * @property {string} password - Mot de passe hashé.
 */
const userSchema = new mongoose.Schema({
  username: { type: String, required: true },
  email:    { type: String, required: true, unique: true },
  password: { type: String, required: true, minlength: 6 }
});

/**
 * Hash automatiquement le mot de passe avant la sauvegarde.
 *
 * @function
 * @name preSave
 * @memberof module:models/User~User
 * @description
 * Si le mot de passe a été modifié, il est hashé avec bcrypt
 * avant d’être enregistré en base.
 *
 * @param {Function} next - Callback permettant de poursuivre la sauvegarde.
 */
userSchema.pre('save', async function(next) {
  if (!this.isModified('password')) return next();
  this.password = await bcrypt.hash(this.password, 10);
});

/**
 * Compare un mot de passe en clair avec le mot de passe hashé.
 *
 * @function comparePassword
 * @memberof module:models/User~User
 * @instance
 *
 * @param {string} password - Mot de passe en clair à vérifier.
 * @returns {Promise&lt;boolean>} Résultat de la comparaison.
 */
userSchema.methods.comparePassword = function(password) {
  return bcrypt.compare(password, this.password);
};

/**
 * Modèle Mongoose User.
 * @type {mongoose.Model&lt;User>}
 */
module.exports = mongoose.model('User', userSchema);
</code></pre>
      </article>
    </section>






  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> on Sun Feb 08 2026 00:26:40
    GMT+0100 (heure normale d’Europe centrale) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
  </footer>

  <script>prettyPrint();</script>
  <script src="scripts/polyfill.js"></script>
  <script src="scripts/linenumber.js"></script>



</body>

</html>